---
title: Java并发笔记1
date: 2018-06-28 15:28:59
tags: [Java,编程语言,读书笔记,并发]
categories: [编程语言]
---
### 进程和线程
一个进程可以有多个线程，线程有自己的堆栈，自己的程序计数器和局部变量，但是他们共享进程的系统资源。因此要小心线程之间彼此影响。

#### 多线程优点
- 进程间内存不能共享，而线程间可以共享内存
- 新建进程需要分配系统资源，而新建线程则不需要分配，创建和切换代价小，从而使多线程来实现多任务比多进程效率更高。

#### java线程的创建
1. 使用`Thread()`创建线程，使用`start()`方法来启动线程。
2. 也可以通过实现`Runnable`接口，然后作为`Thread`的target创建线程。
3. `Runnable`接口方式的优点是可以继承其他类。

#### 线程的周期
1. 创建。想让新创建的子线程立即执行可以使用`Thread.sleep(1)`，让主线程暂停一下。
2. 就绪
3. 运行
4. 阻塞
5. 死亡

#### tip
1. 注意少使用`suspend()`和`stop()`，这样会造成死锁。
2. 使用`isAlive()`判断

#### 线程的控制
1. join线程
在执行的线程A运行时调用其他线程B的`B.join()`方法后，A线程将等到B线程结束之后才执行。
2. 后台进程
在`start()`之前，调用`setDaemon()`。可以使用`isDaemon()`判断是否是后台线程，后台线程创建的线程默认是后台线程。程序中的所有前台线程运行结束后，后台线程会被通知死亡，不过这会有一定的时间。
3. `yield()`静态方法
与`sleep()`类似，但是不会让位于优先级比自己低的线程，所以如果其优先级最高且没有同级的线程的话，调用此方法后该线程依然继续执行。
4. 设置线程优先级
`setPriority(int)`接受1～10的整数，或者三个静态常量:  `MAX_PRIORITY`,`MIN_PRIORITY`,`NORM_PRIORITY`,对应的数值依次为10,1,5.**虽然Java提供了1～10共10个级别，但是有的系统并不支持，所以为了移植性，最佳实践是使用常量而为直接指定数值**
